CREATE TABLE Schedules (
    id SERIAL PRIMARY KEY,
    day INT CHECK (day BETWEEN 1 AND 7),
    origin VARCHAR(255) NOT NULL,
    destination VARCHAR(255) NOT NULL,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE FreightSchedules (
    id SERIAL PRIMARY KEY,
    schedule_id INT REFERENCES Schedules(id) ON DELETE CASCADE,
    capacity INT DEFAULT 25,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Orders (
    id SERIAL PRIMARY KEY,
    order_number INT UNIQUE NOT NULL,
    priority INT NOT NULL,
    status VARCHAR(10) CHECK (status IN ('unloaded', 'loaded')) DEFAULT 'unloaded',
    freight_id INT REFERENCES FreightSchedules(id) ON DELETE SET NULL,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Drivers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    status VARCHAR(15) CHECK (status IN ('available', 'in transit', 'unavailable')) DEFAULT 'available',
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE DriverSchedules (
    id SERIAL PRIMARY KEY,
    driver_id INT REFERENCES Drivers(id) ON DELETE CASCADE,
    schedule_id INT REFERENCES Schedules(id) ON DELETE CASCADE,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);



erDiagram
    Schedules {
        int id PK
        int day
        string origin
        string destination
        timestamp created
        timestamp updated
    }

    FreightSchedules {
        int id PK
        int schedule_id FK
        int capacity
        timestamp created
        timestamp updated
    }

    Orders {
        int id PK
        int order_number UNIQUE
        int priority
        string status
        int freight_id FK
        timestamp created
        timestamp updated
    }

    Drivers {
        int id PK
        string name
        string status
        timestamp created
        timestamp updated
    }

    DriverSchedules {
        int id PK
        int driver_id FK
        int schedule_id FK
        timestamp created
        timestamp updated
    }

    Schedules ||--o{ FreightSchedules : "has"
    Schedules ||--o{ DriverSchedules : "assigns"
    FreightSchedules ||--o{ Orders : "contains"
    Drivers ||--o{ DriverSchedules : "follows"


